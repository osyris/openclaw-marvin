<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dockerfile Instructions ‚Äî Marvin</title>
    <style>
        :root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text: #e6edf3; --dim: #8b949e; --accent: #58a6ff; --green: #3fb950; --red: #f85149; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace; background: var(--bg); color: var(--text); padding: 2rem; max-width: 860px; margin: 0 auto; line-height: 1.6; }
        h1 { margin-bottom: 0.5rem; }
        .subtitle { color: var(--dim); margin-bottom: 2rem; }
        h2 { color: var(--accent); margin: 2rem 0 0.75rem; font-size: 1.15rem; }
        h3 { color: var(--green); margin: 1.5rem 0 0.5rem; font-size: 1rem; }
        p, li { color: var(--text); font-size: 0.9rem; }
        ul { padding-left: 1.5rem; margin: 0.5rem 0; }
        pre { background: var(--card); border: 1px solid var(--border); border-radius: 6px; padding: 1rem; overflow-x: auto; margin: 0.75rem 0; font-size: 0.82rem; position: relative; }
        code { font-family: 'SF Mono', 'Fira Code', monospace; }
        .copy-btn { position: absolute; top: 0.5rem; right: 0.5rem; background: var(--border); border: none; color: var(--dim); padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; font-size: 0.7rem; }
        .copy-btn:hover { background: var(--accent); color: var(--bg); }
        .warn { background: rgba(248,81,73,0.1); border-left: 3px solid var(--red); padding: 0.75rem 1rem; border-radius: 4px; margin: 1rem 0; font-size: 0.85rem; }
        .note { background: rgba(88,166,255,0.1); border-left: 3px solid var(--accent); padding: 0.75rem 1rem; border-radius: 4px; margin: 1rem 0; font-size: 0.85rem; }
        hr { border: none; border-top: 1px solid var(--border); margin: 2rem 0; }
        footer { text-align: center; color: var(--dim); font-size: 0.75rem; margin-top: 3rem; }
    </style>
</head>
<body>

<h1>üê≥ Dockerfile Instructions</h1>
<p class="subtitle">–î–ª—è OpenClaw-–∏–Ω—Å—Ç–∞–Ω—Å–∞ "Marvin" –Ω–∞ Railway. –î–∞—Ç–∞: 14 —Ñ–µ–≤—Ä–∞–ª—è 2026.</p>

<hr>

<h2>1. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –≤ Dockerfile</h2>
<p>–í —Ç–µ–∫—É—â–µ–º –±–∞–∑–æ–≤–æ–º –æ–±—Ä–∞–∑–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç SSH-–∫–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω –¥–ª—è <code>git push</code> –ø–æ SSH. –î–æ–±–∞–≤–∏—Ç—å:</p>
<pre><code>RUN apt-get update && apt-get install -y openssh-client && rm -rf /var/lib/apt/lists/*</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<div class="note">
    <strong>Chromium</strong> (<code>/usr/bin/chromium</code>) —Ç–æ–∂–µ –Ω—É–∂–µ–Ω, –Ω–æ –æ–Ω —Å–ª–µ—Ç–∞–µ—Ç –ø—Ä–∏ —Ä–µ–¥–µ–ø–ª–æ–µ. –ï—Å–ª–∏ –æ–Ω –µ—â—ë –Ω–µ –≤ Dockerfile ‚Äî –¥–æ–±–∞–≤–∏—Ç—å:<br>
    <code>RUN apt-get update && apt-get install -y openssh-client chromium && rm -rf /var/lib/apt/lists/*</code>
</div>

<h2>2. Entrypoint / startup script</h2>
<p>–ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –∏ Git identity. –ù–∞ persistent volume (<code>/data</code>) –ª–µ–∂–∏—Ç –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:</p>
<pre><code># –î–æ–±–∞–≤–∏—Ç—å –≤ entrypoint (–¥–æ –∑–∞–ø—É—Å–∫–∞ OpenClaw):
[ -f /data/.ssh/setup.sh ] && /data/.ssh/setup.sh</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<p>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç <code>/data/.ssh/setup.sh</code>:</p>
<ul>
    <li>–°–æ–∑–¥–∞—ë—Ç <code>/root/.ssh/config</code> —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞ deploy key –≤ <code>/data/.ssh/marvin_deploy</code></li>
    <li>–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç <code>git config --global</code> (user.name: Marvin, email: marvin@konzhi.com)</li>
</ul>

<h2>3. Persistent volume</h2>
<p>Volume <code>/data</code> –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:</p>
<pre><code>/data/
‚îú‚îÄ‚îÄ .ssh/
‚îÇ   ‚îú‚îÄ‚îÄ marvin_deploy       # SSH private key (deploy key –¥–ª—è github.com:osyris/marvin.git)
‚îÇ   ‚îú‚îÄ‚îÄ marvin_deploy.pub   # SSH public key
‚îÇ   ‚îî‚îÄ‚îÄ setup.sh            # Startup script (—Å–º. –≤—ã—à–µ)
‚îú‚îÄ‚îÄ .openclaw/              # OpenClaw state, config, sessions
‚îÇ   ‚îî‚îÄ‚îÄ openclaw.json       # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ (—Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏, –ù–ï –≤ git)
‚îú‚îÄ‚îÄ .git/                   # Git repo
‚îú‚îÄ‚îÄ .gitignore              # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ workspace/              # –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∞–≥–µ–Ω—Ç–∞
    ‚îú‚îÄ‚îÄ AGENTS.md, SOUL.md, USER.md, IDENTITY.md, MEMORY.md, TOOLS.md, HEARTBEAT.md
    ‚îú‚îÄ‚îÄ memory/             # –î–Ω–µ–≤–Ω–∏–∫–∏, –∑–∞–º–µ—Ç–∫–∏, —Ñ–æ—Ç–æ
    ‚îú‚îÄ‚îÄ pages/              # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (served at /pages/)
    ‚îî‚îÄ‚îÄ skills/             # –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–∏</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<h2>4. Git remote</h2>
<pre><code>Repository: git@github.com:osyris/marvin.git
Branch: main
Deploy key: ED25519 (read+write), –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —ç—Ç–æ–º—É —Ä–µ–ø–æ</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<h2>5. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Railway)</h2>
<p>–¢–æ–ª—å–∫–æ —ç—Ç–∏ —Ç—Ä–∏ ‚Äî –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤ <code>openclaw.json</code>:</p>
<pre><code>OPENCLAW_STATE_DIR=/data/.openclaw
OPENCLAW_WORKSPACE_DIR=/data/workspace
RAILWAY_RUN_UID=0</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<div class="warn">
    <strong>–ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ env vars:</strong> ANTHROPIC_API_KEY, TELEGRAM_BOT_TOKEN, DEEPGRAM_API_KEY, OPENCLAW_GATEWAY_TOKEN, AUTH_SECRET, PROXY_USER, PROXY_PASSWORD, SETUP_PASSWORD ‚Äî –≤—Å–µ –æ–Ω–∏ —É–∂–µ –≤ openclaw.json.
</div>

<h2>6. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)</h2>
<p>–ù–∞—Å—Ç—Ä–æ–µ–Ω cron –≤–Ω—É—Ç—Ä–∏ OpenClaw: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 –ø–æ Europe/Tallinn –∞–≥–µ–Ω—Ç –¥–µ–ª–∞–µ—Ç:</p>
<pre><code>cd /data && git add -A && git commit -m "daily backup YYYY-MM-DD" && git push origin main</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>
<p>–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è <code>openclaw.sanitized.json</code> ‚Äî –∫–æ–ø–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏ –≤–º–µ—Å—Ç–æ —Å–µ–∫—Ä–µ—Ç–æ–≤.</p>

<h2>7. .gitignore (—á—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–æ)</h2>
<pre><code># –°–µ–∫—Ä–µ—Ç—ã
.openclaw/openclaw.json          # –∫–æ–Ω—Ñ–∏–≥ —Å –∫–ª—é—á–∞–º–∏
.openclaw/.env                   # env —Ñ–∞–π–ª
.openclaw/credentials/           # —Ç–æ–∫–µ–Ω—ã/–ø–∞—Ä–æ–ª–∏
.openclaw/agents/*/agent/auth-profiles.json
.openclaw/identity/              # device identity
.openclaw/devices/               # paired devices

# State/temp
.openclaw/agents/*/sessions/     # —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã —Å–µ—Å—Å–∏–π
.openclaw/browser/               # browser profile data
.openclaw/media/                 # –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
.openclaw/delivery-queue/        # –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π
.openclaw/subagents/             # subagent state
.openclaw/telegram/              # telegram offset state
.openclaw/filebrowser.db
.openclaw/update-check.json
.openclaw/canvas/

# SSH private key
.ssh/marvin_deploy

# Workspace temp
workspace/memory/booking-session.json
workspace/node_modules/
workspace/package-lock.json
workspace/*.jsonl</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<hr>

<h2>–°–≤–æ–¥–∫–∞: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Dockerfile</h2>
<pre><code># 1. –î–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç
RUN apt-get update && apt-get install -y openssh-client && rm -rf /var/lib/apt/lists/*

# 2. –í entrypoint, –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º openclaw:
[ -f /data/.ssh/setup.sh ] && /data/.ssh/setup.sh</code><button class="copy-btn" onclick="copy(this)">Copy</button></pre>

<footer>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ú–∞—Ä–≤–∏–Ω–æ–º ü§ñ ‚Ä¢ 14.02.2026</footer>

<script>
function copy(btn) {
    const code = btn.parentElement.querySelector('code').textContent;
    navigator.clipboard.writeText(code);
    btn.textContent = '‚úì';
    setTimeout(() => btn.textContent = 'Copy', 1500);
}
</script>

</body>
</html>
